<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="iconfont(1).css">
    <script src="vue.js"></script>
    <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            list-style: none;
            user-select: none;
            cursor: pointer;
            text-decoration: none;
        }

        .clearfix::after,
        .clearfix::before {
            content: '';
            display: table;
        }

        .clearfix::after {
            clear: both;
        }

        .clearfix {
            zoom: 1;
        }

        #app {
            width: 300px;
            min-height: 600px;
            margin: 20px auto;
            border: 1px solid #ccc;
            position: relative;
        }

        .header {
            width: 100%;
            height: 50px;
            line-height: 50px;
            text-align: center;
            padding: 0 10px;
            padding-left: 22px;
            box-sizing: border-box;
            font-size: 15px;
        }

        .header i {
            margin-left: 7px;
            font-size: 20px;
            color: #666;
        }

        .nav {
            width: 100%;
            height: 30px;
            line-height: 30px;
            border-top: 1px solid #ccc;
            border-bottom: 1px solid #ccc;
            border-left: 3px solid orange;
        }

        .nav ul {
            width: 100%;
            height: 100%;
            font-size: 13px;
        }

        .nav ul li i {
            font-size: 10px;
            color: #666;
        }

        .nav ul li {
            padding: 0 11px;
            box-sizing: border-box;
            display: inline-block;
        }

        .nav ul li:nth-of-type(1) {
            width: 90px;
            padding: 0;
            text-align: center;
        }

        .list ul {
            width: 92px;
            height: auto;
            float: left;
        }

        .list ul li {
            width: 100%;
            height: 32px;
            line-height: 32px;
            text-align: center;
            border-bottom: 1px solid #ccc;
            border-right: 1px solid #ccc;
            font-size: 13px;
            color: #666;
            cursor: pointer;
        }

        .list ol {
            width: 208px;
            height: auto;
            float: left;
        }

        .list ol li {
            width: 208px;
            height: 65px;
            border-bottom: 1px solid #ccc;
            padding-left: 3px;
            box-sizing: border-box;
        }

        .img {
            width: 64px;
            height: 55px;
            background-color: orange;
            float: left;
            margin: 5px 0;

        }

        .img img {
            width: 64px;
            height: 100%;
            background-color: orange;
            float: left;
        }

        .list ol li h4 {
            width: 140px;
            font-size: 12px;
            line-height: 16px;
            margin-bottom: 7px;
            margin-top: 1px;
            float: left;
        }

        .list ol li i {
            font-size: 9px;
            color: orange;
            margin-right: 51px;
        }

        .list ol li span {
            width: 16px;
            height: 16px;
            line-height: 16px;
            text-align: center;
            border-radius: 50%;
            border: 1px solid #ddd;
            font-size: 9px;
            color: #fff;
            display: inline-block;
            background-color: orange;
        }

        .list ol li span:nth-of-type(2) {
            width: 5px;
            height: 0;
            border: none;
            color: black;
        }

        footer {
            width: 100%;
            height: 40px;
            line-height: 40px;
            position: absolute;
            bottom: 0;
            left: 0;
            background-color: #ccc;
            font-size: 14px;
            padding: 0 20px;
            box-sizing: border-box;
        }

        footer a {
            position: absolute;
            right: 0;
            border: none;
            background-color: yellowgreen;
            display: inline-block;
            width: 60px;
            height: 100%;
            outline: none;
            text-align: center;
            text-decoration: none;
            color: #fff;
        }

        footer button {
            position: absolute;
            right: 0;
            border: none;
            background-color: yellowgreen;
            display: inline-block;
            width: 60px;
            height: 100%;
            outline: none;
            color: #fff;
        }
        /*  */
        .fanhui{
            width: 100%;
            height: 50px;
            line-height: 50px;
            padding: 0 20px;
            box-sizing: border-box;
            font-size: 40px;
        }
        .foot{
            width: 100%;
            min-height: 100px;
            padding: 30px;
            box-sizing: border-box;
        }
        .foot ul{
            width: 100%;
            height: 30px;
            line-height: 30px;
        }
        .foot ul li{
            height: 50px;
            border-bottom: 1px solid #ccc;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .foot ul li .img{
            width: 30px;
            height: 30px;
            display: inline-block;
            margin-right: 20px;
            background-color: blue;
        }
        .foot ul li .img img{
            width: 100%;
            height: 100%;
        }
        .foot ul li span:nth-of-type(1){
            margin-right: 20px;
        }
        .foot ul li span:nth-of-type(2){
            margin-right: 20px;
        }
        .foot ul li span:nth-of-type(3){
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div id="app">
        <router-view></router-view>
    </div>
    <template id="selectGoods">
        <div>
            <div class="header">配送至：北京石景山<i class="iconfont icon-xiala"></i><i class="iconfont icon-icon-test"
                    style="float: right;"></i></div>
            <div class="nav">
                <ul>
                    <li style="border-right: 1px solid #ccc">热场新品</li>
                    <li>综合排序</li>
                    <li>按价格<i class="iconfont icon-shangxiajiantou"></i></li>
                    <li>分类</li>
                </ul>
            </div>
            <div class="list">
                <ul>
                    <li v-for="item,index in goodsList" @click="classify(index)" :class="{'active':i==index}">{{item.category}}
                    </li>
                </ul>
                <ol>
                    <li class="clearfix" v-for="item,index in list">
                        <div class="img"><img :src="item.img" alt=""></div>
                        <h4>{{item.title}}</h4>
                        <i>{{item.price}}</i>
                        <span @click="delCart(item)">-</span>
                        <span>{{item.num || 0}}</span>
                        <span @click="addCart(item)">+</span>
                    </li>
                </ol>
            </div>
            <footer>
                一共{{total}}&nbsp;元
                <router-link :to="{name:'shoppingCart',params:{selectList}}">去结算</router-link>
            </footer>
        </div>
    </template>
    <template id="shoppingCart">
        <div>
            <div class="fanhui"><router-link to="goodslist"><</router-link></div>
            <div class="foot">
                <ul>
                    <li v-for="item in arr1">
                        <div class="img"><img :src="item.img" alt=""></div>
                        <span>{{item.title}}</span>
                        <span>x{{item.num}}</span>
                        <span>￥{{(item.num*item.price).toFixed(2)}}</span>
                    </li>
                </ul>
            </div>
            <footer>
                一共{{total}}元
                <button>去支付</button>
            </footer>
        </div>
    </template>
    <script>
        var shoppingCart={
            template:'#shoppingCart',
            data(){
                return {
                    arr1:this.$route.params.selectList || [],
                }
            },
            computed: {
                total(){
                    var n=0;
                    this.arr1.forEach(element=>{
                        n+=element.price*element.num;
                    });
                    return n.toFixed(2);
                }
            },
        }
        var selectGoods = {
            template: '#selectGoods',
            data() {
                return {
                    goodsList:[
                        {
                            category:'新鲜水果',
                            goods:[
                                {
                                    img:"https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1964588475,3443442286&fm=26&gp=0.jpg",
                                    title:'优选水果',
                                    price:10.8,
                                },{
                                    img:"https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1964588475,3443442286&fm=26&gp=0.jpg",
                                    title:'优选水',
                                    price:10.8,
                                },{
                                    img:"https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1964588475,3443442286&fm=26&gp=0.jpg",
                                    title:'优选水果',
                                    price:10.8,
                                },
                            ]
                        },{
                            category:'卤味熟食', 
                            goods:[
                                {
                                    img:'https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&quality=100&size=b4000_4000&sec=1559218135&di=d52b1133f769391ce12a7bd746f8e6f5&src=http://img.redocn.com/sheying/20140910/taiwanhongshushaolurou_3044437.jpg',
                                    title:'卤味熟食',
                                    price:66,
                                },{
                                    img:'https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&quality=100&size=b4000_4000&sec=1559218135&di=d52b1133f769391ce12a7bd746f8e6f5&src=http://img.redocn.com/sheying/20140910/taiwanhongshushaolurou_3044437.jpg',
                                    title:'卤味熟食',
                                    price:66,
                                },{
                                    img:'https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&quality=100&size=b4000_4000&sec=1559218135&di=d52b1133f769391ce12a7bd746f8e6f5&src=http://img.redocn.com/sheying/20140910/taiwanhongshushaolurou_3044437.jpg',
                                    title:'卤味熟食',
                                    price:66,
                                },
                            ]
                        },{
                            category:'饮料酒水',
                            goods:[
                                {
                                    img:'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=3102216276,2912118974&fm=15&gp=0.jpg',
                                    title:'饮料酒水',
                                    price:100,
                                },{
                                    img:'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=3102216276,2912118974&fm=15&gp=0.jpg',
                                    title:'饮料酒水',
                                    price:100,
                                },{
                                    img:'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=3102216276,2912118974&fm=15&gp=0.jpg',
                                    title:'饮料酒水',
                                    price:100,
                                },
                            ]
                        }
                    ],
                    quantitys: 0,
                    list: [],
                    i: 0,
                }
            },
            methods: {
                classify(index) {
                    this.list = this.goodsList[index].goods;
                    this.i = index;
                },
                addCart(item) {
                    if(item.num){
                        item.num++;
                    }else{
                        Vue.set(item,'num',1);
                    }
                },
                delCart(item) {
                    if(item.num){
                        if(item.num==0) return;
                        item.num--;
                    }
                },
            },
            computed:{
                selectList(){
                    var arr=[];
                    this.goodsList.forEach(element => {
                        if(element.goods && element.goods.length>0)
                        element.goods.forEach(el=>{
                            if(el.num){
                                arr.push(el);
                            }
                        })
                    });
                    return arr;
                },
                total(){
                    var n=0;
                    this.selectList.forEach(element=>{
                        n+=element.price*element.num;
                    });
                    return n.toFixed(2);
                }
            },
        }
        const router=new VueRouter({
            routes:[
                {
                    path:'/goodslist',
                    component:selectGoods,
                },{
                    path:'/shoppingCart',
                    name:'shoppingCart',
                    component:shoppingCart,
                }
            ]
        })
        var vm = new Vue({
            router,
            el: '#app',
        })
        // vm.classify(0)
    </script>
</body>

</html>